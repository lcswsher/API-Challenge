google.maps.__gjsload__('visualization_impl', function(_){var N$=function(){if(null!=M$)return M$;var a=document.createElement("canvas");return M$=!(!a.getContext||!a.getContext("2d"))},O$=function(a){for(var b=Array(a),c=0;c<a;++c)b[c]=0;c=Array(a);for(var d=0;d<a;++d)c[d]=b.concat();return c},qqa=function(a){if(!a||!a.getLength())return 1;var b=new _.Ag;a.forEach(function(l){l&&b.extend(l.location?l.location:l)});var c=b.Ua.g,d=b.La.g,e=Math.max(b.Ua.i-c,b.La.i-d);if(1E-9>e){var f=0;a.forEach(function(l){l instanceof _.J?++f:f+=l.weight});return Math.max(1,
f)}var g=800/e,h=O$(800),k=1;a.forEach(function(l){if(l){var m=l.location?l.location:l;l=l.weight||1;m=new _.O(Math.max(0,Math.min(799,Math.floor((m.lat()-c)*g))),Math.max(0,Math.min(799,Math.floor((m.lng()-d)*g))));h[m.x][m.y]+=l;k=Math.max(k,h[m.x][m.y])}});return k},sqa=function(a,b){var c=[],d=[],e=1E3/(a.length-1);_.B(a,function(h,k){c.push(k*e);d.push(_.EK(h))});a=Array(1001);for(var f=0,g=0;1001>g;++g)g>c[f+1]&&++f,a[g]=f<c.length-1?rqa(e*f,g,e*(f+1),d[f],d[f+1]):d[d.length-1],a[g].alpha*=
b,a[g].alpha=_.Fe(Math.floor(255*a[g].alpha),0,255);return a},rqa=function(a,b,c,d,e){if(a==c)return d;a=(b-a)/(c-a);return new _.CK(Math.floor((e.j-d.j)*a+d.j),Math.floor((e.i-d.i)*a+d.i),Math.floor((e.g-d.g)*a+d.g),(e.alpha-d.alpha)*a+d.alpha)},P$=function(a,b){this.o=a;this.i=b;this.g=1;this.j=[]},Q$=function(a,b,c){_.jq(b.Fa,"");if(N$()){var d=b.ownerDocument,e,f=e=d.createElement("canvas");_.pq(f);f.width=f.height=256;f=f.getContext("2d");var g=1<a.g;b.Fa.appendChild(e);b=tqa(a,b);e=a.j;for(var h=
Math.floor(e.length/2),k=b.length,l=k-h,m=O$(k),q=0;q<k;++q)for(var r=b[q],u=m[q],v=0;v<k;++v){var x=r[v];if(x)for(var w=v-h,F=Math.min(l,v+h+1),G=Math.max(h,w);G<F;++G)u[G]+=x*e[G-w]}b=O$(k-2*h);for(q=0;q<k;++q)for(r=m[q],u=Math.max(h,q-h),v=Math.min(l,q+h+1),x=q-h,w=h,F=0;w<l;++w,++F)if(G=r[w])for(var L=u;L<v;++L)b[L-h][F]+=G*e[L-x];e=Math.ceil(256/a.g);e=f.createImageData(e,e);h=a.get("gradient");k=h[h.length-1];c=h.length/c;l=e.data;q=m=0;for(r=b.length;q<r;++q)for(u=b[q],v=0,x=u.length;v<x;++v)(w=
u[v])||h[0].alpha?(w=h[Math.floor(w*c)]||k,l[m++]=w.j,l[m++]=w.i,l[m++]=w.g,l[m++]=w.alpha):m+=4;g?(d=d.createElement("canvas"),d.width=d.height=256/a.g,d.getContext("2d").putImageData(e,0,0),f.scale(a.g,a.g),f.drawImage(d,0,0)):f.putImageData(e,0,0)}},tqa=function(a,b){var c=a.get("projection");c=_.ho(c);var d=a.get("radius");d=Math.round(d/a.g)*a.g;var e=b.rd,f=(256+2*d)/a.g,g=O$(f),h;for(h in e){var k=e[h],l=c.fromLatLngToPoint(new _.J(k.Ca,k.Ba,!0)),m=c.fromLatLngToPoint(new _.J(k.Ia,k.Ga,!0)),
q=null;q=_.tr(a.i,new _.th(l.x,l.y),b.zoom,function(w){return w});m=_.tr(a.i,new _.th(m.x,m.y),b.zoom,function(w){return w});l=d/256;q=_.Ar(a.i,{va:Math.min(q.va,m.va)+l,wa:Math.min(q.wa,m.wa)+l,Ea:b.zoom});q=new _.O(q.g,q.i);k=a.o.search(k);m=0;for(l=k.length;m<l;++m){var r=k[m],u=c.fromLatLngToPoint(new _.J(r.Va.x,r.Va.y)),v=0,x=0;u=_.bz(a.i,new _.th(u.x,u.y),new _.th(q.x,q.y),b.zoom);v=Math.floor(256*u.va);x=Math.floor(256*u.wa);u=Math.floor((x+d)/a.g);v=Math.floor((v+d)/a.g);0<=u&&u<f&&0<=v&&
v<f&&(g[u][v]+=r.weight)}}return g},U$=function(a,b){b=void 0===b?_.Or:b;var c=this;this.H=b;this.O=new _.Sg(256,256);this.g={};b=_.oi(-100,-300,100,300);this.N=new _.QJ(b,void 0);b=_.oi(-90,-180,90,180);this.j=_.WJ(b,function(d,e){return d.Va.equals(e.Va)&&d.weight==e.weight});this.ha=[];this.V=new _.Dh;this.i=0;this.o=new P$(this.j,this.H);this.o.bindTo("projection",this,"projection",!0);this.o.bindTo("gradient",this,"gradient",!0);this.o.bindTo("radius",this,"radius",!0);a(this.V,function(d){return Q$(c.o,
d,c.i)});this.W=new _.Lo(function(){var d=c.i;c.i=R$(c);_.He(d,c.i)||S$(c)},0);this.addListener("data_changed",function(){return uqa(c)});this.addListener("maxintensity_changed",function(){c.i=R$(c);S$(c)});this.addListener("gradient_changed",function(){S$(c)});this.addListener("opacity_changed",function(){var d=c.get("opacity"),e;for(e in c.g)c.g.hasOwnProperty(e)&&_.cA(c.g[e].Fa,d)});this.addListener("radius_changed",function(){for(var d in c.g)if(c.g.hasOwnProperty(d)){var e=c.g[d],f=void 0,g=
e.rd;for(f in g)g.hasOwnProperty(f)&&c.N.remove(g[f]);e.rd={};T$(c,e)}S$(c)});this.triggersTileLoadEvent=!0},T$=function(a,b){var c={va:b.Sa.x,wa:b.Sa.y,Ea:b.zoom},d=a.get("radius"),e=_.ho(a.get("projection")),f=_.Ar(a.H,c);f=new _.O(f.g,f.i);d=_.az(a.H,c,d/256);c=d.min;d=d.max;c=_.oi(c.g,c.i,d.g,d.i);_.XJ(c,e,f,function(g){g.g=b;b.rd[_.Wf(g)]=g;_.RJ(a.N,g)})},R$=function(a){var b=a.get("maxIntensity");return 1<=b?b:qqa(a.get("data"))},uqa=function(a){a.j.clear();var b=a.get("data");b&&(b.forEach(function(e){e&&
_.VJ(a.j,V$(e))}),a.W.Ob());S$(a);for(var c=_.p(a.ha),d=c.next();!d.done;d=c.next())_.M.removeListener(d.value);a.ha=b?[b.addListener("insert_at",function(e){return W$(a,e)}),b.addListener("remove_at",function(e,f){return X$(a,f)}),b.addListener("set_at",function(e,f){X$(a,f);W$(a,e)})]:[]},W$=function(a,b){if(b=a.get("data").getAt(b))b=V$(b),_.VJ(a.j,b),a.W.Ob(),Y$(a,b.Va)},X$=function(a,b){b&&(b=V$(b),a.j.remove(b),a.W.Ob(),Y$(a,b.Va))},Y$=function(a,b){b=_.TJ(a.N,b);b=_.p(b);for(var c=b.next();!c.done;c=
b.next())_.Eh(a.V,c.value.g)},S$=function(a){for(var b in a.g)a.g.hasOwnProperty(b)&&_.Eh(a.V,a.g[b])},V$=function(a){var b=a.location?a.location:a;a=a.weight||1;return{Va:new _.O(b.lat(),b.lng()),weight:a}},Z$=function(a,b){var c=new _.PI(_.QI(250));this.g=a;a.g=(0,_.y)(this.j,this);this.H=b;this.i=c},$$=function(){},M$,vqa="rgba(102, 255, 0, 0);rgba(102, 255, 0, 1);rgba(147, 255, 0, 1);rgba(193, 255, 0, 1);rgba(238, 255, 0, 1);rgba(244, 227, 0, 1);rgba(249, 198, 0, 1);rgba(255, 170, 0, 1);rgba(255, 113, 0, 1);rgba(255, 57, 0, 1);rgba(255, 0, 0, 1)".split(";");_.A(P$,_.N);P$.prototype.radius_changed=function(){var a=this.get("radius");N$()?this.g=20>a?1:2:this.g=4;a=Math.round(a/this.g);for(var b=a/3,c=[],d=-a;d<=a;d++)c.push(Math.exp(-d*d/(2*b*b)));this.j=c};_.t(U$,_.Cj);U$.prototype.Rb=function(){return{tileSize:{na:this.O.width,ta:this.O.height},Ra:this.H,Yb:2,ac:this.ka.bind(this)}};
U$.prototype.ka=function(a,b){var c=this,d=(void 0===b?{}:b).Kb,e=document.createElement("div");_.ri(e,this.O);b=this.get("opacity");void 0!==b&&_.cA(e,b);var f={Fa:e,zoom:a.Ea,Sa:new _.O(a.va,a.wa),rd:{},ownerDocument:document};e.vb=f;this.g[_.Wf(f)]=f;T$(this,f);this.i||(this.i=R$(this));Q$(this.o,f,this.i);var g=!1;a=Promise.resolve();a.then(function(){g=!0});return{tb:function(){return e},vc:function(){return g},loaded:a,release:function(){_.jq(e,"");delete c.g[_.Wf(f)];d&&d()}}};
U$.prototype.releaseTile=function(a){if(a){var b=a.vb;a.vb=null;delete this.g[_.Wf(b)];a=this.N;for(var c in b.rd)b.rd.hasOwnProperty(c)&&a.remove(b.rd[c]);_.jq(b.Fa,"")}};Z$.prototype.j=function(){_.HI(this.i,(0,_.y)(this.o,this))};Z$.prototype.o=function(){a:{var a=this.g.i;for(var b in a){a=a[b];this.g.remove(a);break a}a=null}a&&this.H(a)};$$.prototype.g=function(a){var b=a.j,c=a.j=a.get("map");b&&(a.g&&(a.g.unbindAll(),a.g=null),a.i&&(a.i.release(),a.i=null),_.co("Lh","-p",a));if(c){var d=function(){k&&k.unbindAll();k=new U$(g,h);c&&k.bindTo("projection",c);k.bindTo("data",a);k.bindTo("maxIntensity",a);k.bindTo("gradient",e,"colorGradient");k.bindTo("radius",f,"renderingRadius");a.g&&(k.bindTo("opacity",a.g),e.set("opacity",1))};a.g=new _.Qu({dissipating:!0,gradient:vqa,opacity:.6,radius:10});a.g.bindTo("dissipating",a);a.g.bindTo("gradient",
a);a.g.bindTo("opacity",a);a.g.bindTo("radius",a);var e=new _.ZI(["stringGradient","opacity"],"colorGradient",function(q,r){return sqa(q,r)});e.bindTo("stringGradient",a.g,"gradient",!0);var f=new _.ZI(["radius","dissipating","zoom"],"renderingRadius",function(q,r,u){return r?q:Math.min(Math.round(q*Math.pow(2,u)),256)});f.bindTo("radius",a.g);f.bindTo("zoom",c);f.bindTo("dissipating",a.g);var g=function(q,r){new Z$(q,r)};b=c.__gm;var h=void 0,k=null;d();var l=k.Rb(),m=_.jh(l);b.i.then(function(q){q.Ne.Wa(function(r){r&&
h!=r.Ra&&(h=r.Ra,d(),m.set(k.Rb()))})});_.mK(c,m,"overlayLayer",15,{Zj:function(q){a.i&&a.i.release();a.i=q}});_.P(c,"Lh");_.bo("Lh","-p",a)}};_.If("visualization_impl",new $$);});
